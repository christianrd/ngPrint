angular.module("ngPrint",[]).directive("printer",["$templateRequest","$sce","$compile","$timeout","$http",function(r,e,t,n,i){return{restrict:"A",scope:{printerData:"=",printerExtra:"=",printerOnError:"&"},link:function(e,o,l){o.click(function(){var o=(e.printerData,e.printerExtra,e.printerOnError),a=l.printOnClient||!1,c=(l.serverUrl,l.printerDownloadUrl),p=l.reportTemplateUrl,u=l.reportTitle;r(p).then(function(r){var o=angular.element(r),l=t(o)(e);n(function(){var r=l.html();if(a){var e=new jsPDF("p","pt","letter");if(!e)return void console.log("jsPDF library not found.");var t=e.canvas;t.height=792,t.width=612,html2pdf(r,e,function(r){r.save(u+".pdf")})}else i.post(serverUrl,{title:u,content:r},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r){window.location=c+r})},300)},function(){o?o():console.log("An error ocurred while generating pdf document")})})}}}]);